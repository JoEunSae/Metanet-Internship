# Day39

## Traffic manager

### 트래픽 관리자란?
- 글로벌 Azure 지역을 대상으로 트래픽의 최적 분산을 제공하기 위해 DNS 기반 트래픽 부하 분산 서비스로 개발되었으며 고가용성과 높은 응답성을 제공한다.

![image](https://github.com/JoEunSae/Metanet-Internship/assets/83803199/fe94ecb4-24dd-45dc-8c9b-a8407a9fd8e8)

#### 특징
- DNS 기반 요청 라우팅
- 다양한 엔드포인트 지원
- 여러 가지 라우팅 알고리즘 지원
- 상태 검사와 장애 조치 지원

#### 주요 시나리오
- 애플리케이션의 고가용성 지원
- 고성능 애플리케이션의 응답성 향상
- 가동 중지 시간 없이 서비스 유지 관리
- 온프레미스와 클라우드 기반 애플리케이션 결합
- 대규모 복잡한 배포에 트래픽 분산

### 라우팅 알고리즘 종류
- 성능 라우팅 알고리즘
  - Azure 데이터 센터 간 왕복 응답 시간을 추적한 테이블을 사용하여 사용자에게 가장 빠른 응답을 제공하며 가장 가까운 위치로 트래픽을 라우팅 하도록 설계된 알고리즘
- 우선순위 라우팅 알고리즘
  - 우선순위로 정렬된 서비스 엔드포인트 목록을 통해 가장 우선순위가 높은 엔드포인트로 트래픽을 라우팅하도록 설계된 알고리즘
- 가중 라우팅 알고리즘
  - 엔드포인트에 가중치를 미리 할당하고 이를 이용해 트래픽을 라우팅하거나 균등하게 분산하도록 설계된 알고리즘
- 지리적 라우팅 알고리즘
  - 엔드포인트에 할당된 지리적 위치 집합과 사용자의 지리적 위치를 비교해 트래픽을 해당 엔드포인트로 라우팅하도록 설계한 알고리즘이다.
- 다중값 라우팅 알고리즘
  - 한 번의 DNS 쿼리 응답에 정상 상태인 여러 엔드포인트로 반환하고 반환된 엔드포인트에 연결을 시도하고 응답하지 않는 경우 다른 엔드포인트로 연결을 시도
- 서브넷 라우팅 알고리즘
  - 사용자 IP 주소가 속한 서브넷 주소 범위를 특정 엔드포인트에 매핑하고 이를 기반으로 트래픽을 라우팅하는 알고리즘

### 트래픽 관리자 배포

1. 트래픽 관리자 프로필 만들기

![image](https://github.com/JoEunSae/Metanet-Internship/assets/83803199/20cef2d5-5034-4022-befd-77e3ff92be36)



## 가상 네트워크 연결

### 가상 네트워크 연결 솔루션
- S2S(Site-to-Site) : Azure 가상 네트워크와 온프레미스 네트워크 혹은 타 클라우드의 가상 네트워크를 연결하는 '사이트 간 연결', Azure 가상 네트워크 게이트웨이와 로컬 게이트웨이가 필요 
- P2S(Point-to-Site) : Azure 가상 네트워크와 개별 디바이스를 연결하는 '지점 및 사이트 간 연결' Azure 가상네트워크 게이트웨이와 클라이언트의 VPN 클라이언트 구성이 필요
- VNet-VNet(VNet-to-VNet) : 서로 다른 지역이나 구독에 있는 Azure의 가상 네트워크들을 연결하는 '가상 네트워크 간 연결', 가상 네트워크 피어링이나 가상 네트워크 게이트웨이를 사용

### VPN(Virtual Private Network)
- 인터넷상에서 안전한 사설 네트워크 연결을 제공하기 위한 기술
- 원격 사용자와 조직 네트워크를 안전하게 연결하고 트래픽을 보호하는 역할뿐만 아니라 필요에 따라 다른 위치의 두 지점을 연결하는 사이트 간의 보호된 통신을 구성하는 데도 사용

#### S2S VPN과 P2S VPN
- S2S VPN : Azure와 온프레미스를 하이브리드 연결하는 복잡성이 높은 네트워크 구성 작업에 사용
- P2S VPN : 개별 클라이언트 장치를 Azure 가상 네트워크와 안전하게 연결, 클라이언트 장치는 집이나 카페, 사무실 등 원격 위치에서 가상 네트워크에 연결할 때 유용하다.

#### VNet-VNet연결
- Azure 내의 가상 네트워크끼리 간단히 연결하는 기술
- S2S 보다 더 쉽고 빠르다.

### VPN과 VNet의 차이

#### VPN
- VPN은 일반적으로 인터넷을 통해 안전한 연결을 제공하는 기술
- Azure에서 VPN은 가상 네트워크 간에 암호화된 연결을 설정하여 안전한 통신을 가능케 한다.
- 주로 온프레미스 네트워크와 Azure 사이, 또는 여러 Azure 가상 네트워크 간에 사용된다.
- 이것은 외부 네트워크와 Azure 간의 안전한 통신을 위한 것

#### VNet
- VNet은 Azure에서 가상 네트워크를 만들고 구성하는 데 사용되는 서비스
- Azure에서 호스팅되는 가상 머신,웹 앱, 데이터베이스 등의 서비스가 사용하는 네트워크를 정의하고 격리할 수 있다.
- VNet은 서로 다른 가상 머신 간의 통신을 제어하고 보안 그룹, 라우팅 테이블 등과 같은 다양한 네트워크 관리 기능을 제공
- VNet은 Azure 내에서 가상 네트워크를 나타내는데 사용되며, VPN을 통해 다른 네트워크와 연결할 수 있다.

### VPN과 Peering차이

#### Peering
- Peering은 같은 클라우드 내에서 서로 다른 가상 네트워크 간에 연결을 설정하는 것
- Azure에서는 VNet Peering이라는 기술을 사용하여 가상 네트워크 간에 트래픽을 전달하거나 리소스를 공유할 수 있다.
- VNet Peering은 클라우드 내에서의 트래픽 전송에 사용되며, 인터넷을 통한 외부 연결이나 추가적인 보안 터널이 필요없다.
- 보통 하나의 가상 네트워크에서 다른 가상 네트워크로 트래픽을 라우팅 하는데 사용된다.

![image](https://github.com/JoEunSae/Metanet-Internship/assets/83803199/722f3342-164c-4d6d-abde-7838662406b1)

### 가상 네트워크 게이트웨이
- 공용 인터넷을 통해 클라우드 가상 네트어크 간 및 사이트 간 네트워크 연결에서 암호화된 트래픽을 전송하는데 사용

