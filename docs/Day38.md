# Day38

## 가상 머신 크기 조정과 가용성 구현

### 가상 머신의 크기 

![image](https://github.com/JoEunSae/Metanet-Internship/assets/83803199/9f01540d-2944-4308-a9e6-4e441d592530)

- 서비스를 제공하는 가상 머신의 사용률이 전반적으로 낮은 경우(크기를 줄여 비용을 절약할 수 있음)
- 가상 머신을 늘리지 않고도 크기를 상향 조정해서 서비스 요청을 충분히 소화할 수 있는 경우

### 가상 머신 가용성 구현
- 가용성은 서버와 네트워크, 프로그램 등의 정보 시스템이 정상적으로 사용 가능한 정도를 말한다.
- uptime + downtime

#### 다운타임 시나리오
- 계획되지 않은 하드웨어 유지 관리
- 계획된 유지 관리
- 예측하지 못한 다운타임


#### 가용성 집합
- 단일 데이터 센터에서 가상 머신의 중복성과 가용성을 제공하는 서비스

#### 가용성 영역
- 가용성 영역은 하나 이상의 데이터 센터로 구성된 3개 이상의 영역을 왕복 대기 시간이 2ms 미만인 고성능 네트워크로 연결

![image](https://github.com/JoEunSae/Metanet-Internship/assets/83803199/135bafae-9728-4548-be23-535504d26cb6)


## Azure의 부하 분산 서비스
- 대량의 네트워크 트래픽을 응답 가능한 여러 서버에 효율적으로 분산시켜, 안정적인 서비스를 제공해야 할 때 사용하는 필수 네트워킹 서비스

### Application Gateway(L7)
- 프런트 엔드 IP주소
- HTTP/HTTPS 수신기
- 라우팅 규칙
- 백 엔드 설정
- 상태 프로브
- 백 엔드 풀
- WAF

![image](https://github.com/JoEunSae/Metanet-Internship/assets/83803199/b615b7d5-79a8-4075-9d45-0bcf85f7d47d)

### Nat Gateway
- 조직 네트워크에 연결된 장비들은 프라이빗 IP를 부여하고 인터넷 통신이 필요한 경우만 지정한 공용 IP에 매핑시켜 인터넷의 대상 리소스와 통신을 가능하게 만드는 것
- 가상 네트워크 리소스의 아웃바운드 인터넷 액세스가 필요할 때 VNet의 프라이빗 IP를 공용 IP 주소로 변환하는 Azure NAT 게이트워에 서비스 제공
- NAT 게이트 웨이에 표준 SKU 공용 IP나 공용 IP 접두사, 또는 두가지를 함께 구성하고 하나 이상의 서브넷에 연결하면, 가상 네트워크에서 인터넷으로 트래픽 흐름이 마들어지고, 이 흐름에 대한 응답으로 리턴 트래픽이 허용된다.

### Azure 부하 분산 장치(L4)
- 애플리케이션 게이트웨이처럼 프런트 엔드로 들어오는 인바운드 트래픽을 백엔드 풀의 리소스에 분산시킨다.
- 부산 알고리즘과 규칙, 상태 프로브를 사용해 결정

![image](https://github.com/JoEunSae/Metanet-Internship/assets/83803199/11d733a1-504a-415e-8e7c-15fc9552809b)

## 가상 머신 탄력성 구현

### VMSS(가상 머신 확장 집합)
- VM을 미리 프로비전할 필요 없이 부하 분산된 동일한 설정의 VM 그룹을 만들어 애플리케이션에 고가용성과 탄력성 제공
- 한 곳에서 자동/수동 크기 조정을 포함하여 VM 집합을 관리, 구성하고 업데이트할 수 있다.
- AWS의 autoscaling group과 유사










